# Secure Boot Demo Sample Code

> **This document is automatically generated by AI and is for reference only.**  
> * Please verify the correctness of all technical details and code
> * Security-related implementations (such as encryption algorithms and key management) require thorough testing

## Description
This sample code demonstrates a secure boot process on the NuMicro M3351 series. It implements a trusted boot chain where the Boot Loader (NuBL2) authenticates the Secure World firmware (NuBL32) and Non-Secure World firmware (NuBL33) before execution.

## Project Structure
*   `NuBL2/`: Source code for the Second Boot Loader (Root of Trust).
*   `NuBL32/`: Source code for the Secure World application.
*   `NuBL33/`: Source code for the Non-Secure World application.
*   `FwSign.py`: Python script for signing firmware images.

## Operation Flow
1.  **System Initialization**: NuBL2 initializes the system clock and Crypto hardware accelerator.
2.  **Security Check**: Checks the status of SOTP (Secure One-Time Programmable) to determine if the device is in a secured state.
3.  **Firmware Verification**:
    *   **Integrity Check**: Calculates SHA-256 hash of NuBL32 and NuBL33 images and compares them with the hash stored in the image TLV (Type-Length-Value) area.
    *   **Authenticity Check**: Verifies the ECDSA-P256 signature of the images using the embedded Public Key.
4.  **Secure Conceal**: Optionally configures and enables the Secure Conceal feature to hide NuBL2 code and data from subsequent execution stages.
5.  **Boot**: Jumps to the entry point of NuBL32.

## Usage
1.  Build `NuBL2`, `NuBL32`, and `NuBL33` projects.
2.  Use the provided `FwSign` scripts to sign `NuBL32` and `NuBL33` binary files.
3.  Download `NuBL2` and the signed `NuBL32`/`NuBL33` images to the target device.
4.  Reset the device. NuBL2 will run, verify the images, and boot into the application.

## Key Features
*   **Hardware Acceleration**: Uses the M3351 Crypto module for fast SHA-256 calculation and ECC signature verification.
*   **Secure Conceal**: Protects the bootloader itself from being accessed by the application.
*   **MCUboot Compatible**: Uses image header and TLV format compatible with MCUboot.
